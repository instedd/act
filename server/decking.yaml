containers:

  act-postgres-data:
    image:               debian:wheezy
    mount:               ["/var/lib/postgresql/data"]

  act-postgres:
    image:               postgres:9.3.5
    mount-from:          ["act-postgres-data"]

  act-sync-data:
    image:               debian:wheezy
    mount:               ["/act/sync"]
  
  act-ssh-data:
    image:               debian:wheezy
    mount:               ["/etc/ssh"]


  act:

    image:               instedd/act

    mount-from:
      - act-ssh-data
      - act-sync-data

    port:
      - "8000:80"
      - "2222:22"

    dependencies:
      - act-postgres:act_postgres

    env:
      - ACT_APP_DIR=-
      - ACT_DATABASE_HOST=-
      - ACT_DATABASE_PASSWORD=-
      - ACT_DATABASE_PORT=-
      - ACT_DATABASE_USERNAME=-
      - SECRET_KEY_BASE=-


clusters:

  dev:
    - act-postgres
    - act-sync-data
    - act-ssh-data
    - act

  prod:
    - act-postgres
    - act-sync-data
    - act-ssh-data
    - act

groups:

  dev:
    options:
      env:
      - ACT_APP_DIR=/home/app/webapp
      - ACT_DATABASE_HOST=act_postgres
      - ACT_DATABASE_PASSWORD=''
      - ACT_DATABASE_PORT=5432
      - ACT_DATABASE_USERNAME=postgres
      - SECRET_KEY_BASE=3b7d6e145ca34014358811429e8ad4488bcfbd756ecd7dabb655578b0b2a11463ea4becc2bed239d8548b49c7fd823d5a9fb76e5e20f620bada680f18bb83264